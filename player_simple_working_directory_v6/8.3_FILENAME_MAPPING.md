# 8.3 Filename Mapping Guide

This document maps long filenames to their 8.3 equivalents for FAT32 compatibility.

## Current SD Card Structure Analysis

### ✅ Already Converted (Good)
- `/audio/GENERA~1/` - Generated audio directory (was `/audio/generated/`)
- `/audio/human/` - Human audio directory (already 8.3 compliant)
- `001.mp3`, `002.mp3`, etc. - Numbered audio files (already 8.3 compliant)
- `001.txt`, `002.txt`, etc. - Text description files (already 8.3 compliant)

### ❌ Needs Conversion (Critical)

#### Config Directory
**Current:** `/config/`
**Target:** `/CONFIG/`

**Files to rename:**
- `config/keys.csv` → `CONFIG/KEYS.CSV`
- `config/mode.cfg` → `CONFIG/MODE.CFG`
- `config/allow_writes.flag` → `CONFIG/WRITES.FLG`

#### Mappings Directory
**Current:** `/mappings/`
**Target:** `/MAPPINGS/`

**Files to rename:**
- `mappings/index.csv` → `MAPPINGS/INDEX.CSV`

#### Audio Directory
**Current:** `/audio/`
**Target:** `/AUDIO/`

**Subdirectories to rename:**
- `audio/` → `AUDIO/`
- `audio/human/` → `AUDIO/HUMAN/`
- `audio/GENERA~1/` → `AUDIO/GENERA~1/` (already correct)

#### File Extensions
**Current:** `.mp3`, `.txt`, `.csv`, `.cfg`
**Target:** `.MP3`, `.TXT`, `.CSV`, `.CFG`

## Conversion Script Needed

Create a batch script or Python script to:

1. **Rename directories:**
   ```
   config/ → CONFIG/
   mappings/ → MAPPINGS/
   audio/ → AUDIO/
   audio/human/ → AUDIO/HUMAN/
   ```

2. **Rename files:**
   ```
   keys.csv → KEYS.CSV
   mode.cfg → MODE.CFG
   allow_writes.flag → WRITES.FLG
   index.csv → INDEX.CSV
   *.mp3 → *.MP3
   *.txt → *.TXT
   ```

3. **Preserve structure:**
   - Keep all numbered files (001.MP3, 002.MP3, etc.)
   - Maintain key directories (A/, B/, C/, SHIFT/, etc.)
   - Keep text descriptions paired with audio files

## Firmware Compatibility

The firmware has been updated to expect:
- `/CONFIG/KEYS.CSV` for button mappings
- `/CONFIG/WRITES.FLG` for write permissions
- `/AUDIO/HUMAN/` for human recordings
- `/AUDIO/GENERA~1/` for generated audio
- `.MP3`, `.WAV`, `.OGG` extensions

## Testing Checklist

After conversion:
- [ ] Device boots and loads configuration
- [ ] FLAG ON command creates `/CONFIG/WRITES.FLG`
- [ ] Button presses find audio in `/AUDIO/HUMAN/` and `/AUDIO/GENERA~1/`
- [ ] GUI shows correct bank names ("HUMAN", "GENERA~1")
- [ ] File uploads work without FLAG:ERR:OPEN errors

## Notes

- FAT32 automatically truncates long directory names to 8.3 format
- `generated` becomes `GENERA~1` on the SD card
- All paths in firmware, CLI, and GUI must match exactly
- Case matters for consistency across systems
